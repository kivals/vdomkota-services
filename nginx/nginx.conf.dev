server {
    listen          80;
    server_name     vdomkota.local www.vdomkota.local;

    location / {
        proxy_pass  http://html-api:3002/;
    }

    location /api/ {
        proxy_pass http://api:3001/;
    }

    location /cms/ {
        proxy_pass http://frontend:8080/;
        # Needed for sockets
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
    }

    location /fonts/ {
        root /usr/share/nginx/static/;
    }

    location ~ \.(css)$ {
        root /usr/share/nginx/static/css/;
    }

    location ~ \.(jpeg|jpg|webp|png|ico|svg)$ {
        root /usr/share/nginx/static/images/;
    }

    location ~ \.(js)$ {
        root /usr/share/nginx/static/js/;
    }

    location ~ \.(mp4|webm)$ {
        root /usr/share/nginx/static/videos/;
    }

    location /sitemap.xml {
        root /usr/share/nginx/static/seo/;
    }

    location /robots.txt {
        root /usr/share/nginx/static/seo/;
    }
}
